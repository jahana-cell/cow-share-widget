<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cow Share Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF5; /* Soft beige background */
        }
        .progress-bar-fill {
            transition: width 0.8s cubic-bezier(0.25, 0.1, 0.25, 1);
        }
        /* Animation for the cow's eyes */
        @keyframes gentle-blink {
            0%, 90%, 100% { transform: scaleY(1); }
            95% { transform: scaleY(0.1); }
        }
        .cow-eye {
            transform-origin: center;
            animation: gentle-blink 4s ease-in-out infinite;
        }
    </style>
</head>
<body class="p-4 sm:p-6 flex items-center justify-center min-h-screen">

    <div class="max-w-4xl w-full mx-auto bg-white p-8 rounded-2xl shadow-lg border border-gray-200/70 grid md:grid-cols-2 gap-8 md:gap-12 items-center">
        
        <!-- Left Column: Cow Image -->
        <div class="flex justify-center">
            <!-- Animated Cartoon Cow SVG -->
            <svg class="w-full max-w-xs h-auto" viewBox="0 0 200 150" xmlns="http://www.w3.org/2000/svg">
                <g>
                    <!-- Ears -->
                    <path d="M45 55 C 15 45, 15 85, 45 75" fill="#A98C78"/>
                    <path d="M155 55 C 185 45, 185 85, 155 75" fill="#A98C78"/>
                    <!-- Head -->
                    <path d="M50 45 C 10 55, 10 115, 50 125 C 90 135, 150 135, 150 125 C 190 115, 190 55, 150 45 C 110 35, 90 35, 50 45 Z" fill="#A98C78"/>
                    <!-- Snout -->
                    <ellipse cx="100" cy="110" rx="45" ry="30" fill="#D4B49E"/>
                    <!-- Nostrils -->
                    <ellipse cx="80" cy="110" rx="6" ry="9" fill="#4A423B"/>
                    <ellipse cx="120" cy="110" rx="6" ry="9" fill="#4A423B"/>
                    <!-- Eyes -->
                    <circle class="cow-eye" cx="70" cy="80" r="12" fill="#4A423B"/>
                    <circle class="cow-eye" cx="130" cy="80" r="12" fill="#4A423B"/>
                    <!-- White reflection in eyes -->
                    <circle cx="73" cy="77" r="3" fill="white"/>
                    <circle cx="133" cy="77" r="3" fill="white"/>
                    <!-- Spots -->
                    <path d="M140 70 C 160 60, 170 90, 150 90 C 130 90, 130 75, 140 70 Z" fill="#FFFFFF"/>
                    <path d="M40 85 C 20 80, 30 110, 50 105 Z" fill="#FFFFFF"/>
                </g>
            </svg>
        </div>

        <!-- Right Column: Content -->
        <div>
            <!-- Header -->
            <div class="mb-6">
                <h1 class="text-3xl font-bold text-[#4A423B]">Cow Share Collective</h1>
                <p class="text-gray-500 mt-1">Join us in purchasing our next cow! Track our progress in real-time.</p>
            </div>

            <!-- Progress Section -->
            <div class="mb-6">
                <h2 class="text-lg font-semibold text-gray-700 mb-2">Purchase Progress</h2>
                <div class="w-full bg-gray-200 rounded-full h-4 overflow-hidden">
                    <div id="progress-bar" class="progress-bar-fill bg-green-500 h-full rounded-full" style="width: 0%;"></div>
                </div>
                <div class="flex justify-between mt-2 text-sm text-gray-600">
                    <div><span class="font-bold" id="shares-sold">--</span> Shares Sold</div>
                    <div><span class="font-bold" id="shares-remaining">--</span> Remaining</div>
                </div>
            </div>

            <!-- Purchase Information -->
            <div class="mt-4 bg-gray-50 p-4 rounded-lg border text-center">
                <p class="text-gray-600">To purchase shares, please visit our main store. Our progress is updated here daily!</p>
            </div>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const DATA_URL = 'https://raw.githubusercontent.com/jahana-cell/cow-share-widget/main/data.json';

        // --- DOM ELEMENTS ---
        const sharesSoldEl = document.getElementById('shares-sold');
        const sharesRemainingEl = document.getElementById('shares-remaining');
        const progressBar = document.getElementById('progress-bar');

        // --- FUNCTIONS ---
        async function fetchDataAndUpdate() {
            try {
                const response = await fetch(DATA_URL + '?cachebust=' + new Date().getTime());
                if (!response.ok) throw new Error('Network response was not ok.');
                
                const data = await response.json();
                const sharesSold = data.sharesSold || 0;
                const totalShares = data.totalShares || 20;
                const sharesRemaining = totalShares - sharesSold;
                const percentage = totalShares > 0 ? (sharesSold / totalShares) * 100 : 0;
                
                // Update the UI
                sharesSoldEl.textContent = sharesSold;
                sharesRemainingEl.textContent = sharesRemaining;
                progressBar.style.width = `${percentage}%`;

            } catch (error) {
                console.warn(error.message);
                console.warn("Could not fetch live data. Displaying placeholder data.");
                // In case of error, you can leave the placeholders or show default values
                sharesSoldEl.textContent = '0';
                sharesRemainingEl.textContent = '20';
                progressBar.style.width = '0%';
            }
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            fetchDataAndUpdate();
        });
    </script>
</body>
</html>
